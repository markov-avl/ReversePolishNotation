# ReversePolishNotation

**Обратная польская запись** - форма записи математических и логических выражений, в которой операнды расположены перед знаками операций. Библиотека `rpn` разработана в ООП-стиле.

## Использование:

Библиотека `rpn` включает в себя классы `RPN`, `Customizer`, `Alphabet`, `Fixation` и `Priority`:
- `RPN` - главный класс, позволяющий получать обратную польскую запись из обычных выражений, а также решать выражения, используя алгоритм ОПЗ;
- `Customizer` - класс, позволяющий настроить допустимые символы в выражениях (используется в связке с экземпляром класса `RPN`);
- `Alphabet` - класс, позволяющий создавать экземпляры объектов символов, допустимых в выражениях (настраивается экземпляром класса `Customizer`);
- `Fixation` - набор констант для определения собственных унарных операций (`PREFIX = 0; POSTFIX = 1`);
- `Priority` - набор констант для определения собственных бинарных операций (`LOW = 0; HIGH = 1`).

Экземпляры классов `RPN` и `Customizer` имеют свойство `alphabet`. Экземпляр класса `Customizer` настраивает это свойство (настраивая алфавит выражений), после чего его можно передавать экземплярам класса `RPN`, которые будут использовать его для вычисления выражений, приходящих им на вход.

Пример:
```python
from typing import Union
from operator import pow
from math import factorial

from rpn import RPN, Customizer, Alphabet, Fixation, Priority


def inc(a: Union[int, float, complex]) -> Union[int, float, complex]:
    return a + 1


def dec(a: Union[int, float, complex]) -> Union[int, float, complex]:
    return a - 1


def main():
    rpn = RPN()
    customizer = Customizer()
    rpn.alphabet = customizer.alphabet = Alphabet()  # или просто customizer.alphabet = rpn.alphabet

    customizer.add_all()
    customizer.add_unary_operation('!', factorial, Fixation.POSTFIX)
    customizer.add_unary_operation('↑', inc, Fixation.POSTFIX)
    customizer.add_unary_operation('↓', dec, Fixation.PREFIX)
    customizer.add_binary_operation('^', pow, Priority.HIGH)

    expression = '↓7↑ * 7 ^ (2 + 2)!'

    print(rpn.get_rpn_expression(expression))  # 7 ↓ ↑ 7 * 2 2 + ! ^
    print(rpn.solve_expression(expression))    # 36703368217294125441230211032033660188801


if __name__ == '__main__':
    main()
```

## Ограничения:

1. **Нельзя** создавать операции с многосимвольной записью (только 1 символ);
2. **Нельзя** создавать иные n-местные операции, кроме унарных и бинарных;
3. **Нельзя** переопределять цифры;
4. **Нельзя** переопределять логику пробела (как операцию - можно);
5. **Нельзя** переопределять логику открывающейся скобки (как операцию - можно);
6. **Нельзя** переопределять логику закрывающейся скобки (как операцию - можно);
7. **Нельзя** использовать самописные операции, не возвращающие число (ведет к нарушению логики или к исключениям).

## Исключения:

Используются 2 типа исключений:
1. `SyntaxError` - если нарушен синтаксис выражения;
2. `ValueError` - если нарушено соглашение о создании новой операции.

\+ исключения, которые могут произойти при использовании самописных операций. Например, пусть `!` - постфиксная унарная операция, определенная как факториал -> определена только на целых положительных числах, поэтому запись `(1 / 2)!` может выбросить исключение.

*Исключения выбрасываются с небольшим описанием ошибки*
